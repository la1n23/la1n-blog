const g="modulepreload",p=function(d){return"/la1n-blog/"+d},f={},b=function(t,e,s){let r=Promise.resolve();if(e&&e.length>0){let l=function(o){return Promise.all(o.map(a=>Promise.resolve(a).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),h=n?.nonce||n?.getAttribute("nonce");r=l(e.map(o=>{if(o=p(o),o in f)return;f[o]=!0;const a=o.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${c}`))return;const i=document.createElement("link");if(i.rel=a?"stylesheet":g,a||(i.as="script"),i.crossOrigin="",i.href=o,h&&i.setAttribute("nonce",h),document.head.appendChild(i),a)return new Promise((m,w)=>{i.addEventListener("load",m),i.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${o}`)))})}))}function u(l){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=l,window.dispatchEvent(n),!n.defaultPrevented)throw l}return r.then(l=>{for(const n of l||[])n.status==="rejected"&&u(n.reason);return t().catch(u)})};class y extends HTMLElement{#n;#e;#s;#t;#o;trailingSlashes;stripTrailingSlash;formatURL;constructor(){super(),this.#t=this.querySelector("button[data-open-modal]"),this.#n=this.querySelector("button[data-close-modal]"),this.#e=this.querySelector("dialog"),this.#s=this.querySelector(".dialog-frame"),this.#o=new AbortController,this.trailingSlashes=this.dataset.trailingSlashes==="true",this.stripTrailingSlash=e=>e.replace(/(.)\/(#.*)?$/,"$1$2"),this.formatURL=this.trailingSlashes?e=>e:this.stripTrailingSlash,this.#t?(this.#t.addEventListener("click",this.openModal),this.#t.disabled=!1):console.warn("Search button not found"),this.#n?this.#n.addEventListener("click",this.closeModal):console.warn("Close button not found"),this.#e?this.#e.addEventListener("close",()=>{window.removeEventListener("click",this.onWindowClick),document.querySelector("body")?.classList.remove("overflow-hidden")}):console.warn("Dialog not found"),(window.requestIdleCallback||(e=>setTimeout(e,1)))(async()=>{const{PagefindUI:e}=await b(async()=>{const{PagefindUI:s}=await import("./ui-core.B0KfjCv_.js");return{PagefindUI:s}},[]);new e({baseUrl:"/la1n-blog",bundlePath:"/la1n-blog".replace(/\/$/,"")+"/pagefind/",element:"#pagefind-search",showImages:!1,showSubResults:!0,processResult:s=>(s.url=this.formatURL(s.url),s.sub_results=s.sub_results.map(r=>(r.url=this.formatURL(r.url),r)),s)})})}connectedCallback(){window.addEventListener("keydown",this.onWindowKeydown,{signal:this.#o.signal})}disconnectedCallback(){this.#o.abort()}openModal=t=>{if(!this.#e){console.warn("Dialog not found");return}document.querySelector("body")?.classList.add("overflow-hidden"),this.#e.showModal(),this.querySelector("input")?.focus(),t?.stopPropagation(),window.addEventListener("click",this.onWindowClick,{signal:this.#o.signal})};closeModal=()=>{this.#e?.close()};onWindowClick=t=>{("href"in(t.target||{})||document.body.contains(t.target)&&!this.#s?.contains(t.target))&&this.closeModal()};onWindowKeydown=t=>{if(!this.#e){console.warn("Dialog not found");return}(t.metaKey===!0||t.ctrlKey===!0)&&t.key==="k"&&(this.#e.open?this.closeModal():this.openModal(),t.preventDefault())}}customElements.define("site-search",y);export{b as _};
